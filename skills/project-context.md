# Project Context Skill

> 專案上下文守護者 - 確保文檔一致性、記錄操作風格、追蹤技術決策

## 觸發條件

- 專案初始化時（/init）
- 新增功能/重構完成後
- /learning 執行後

## 執行內容

### 1. 文檔同步檢查

每次觸發時，檢查以下文檔是否與實際狀態一致：

| 文檔 | 檢查項目 |
|------|----------|
| `PROJECT_MAP.md` | 開發進度、核心模組索引、目錄結構 |
| `CLAUDE.md` | 當前工作、技術決策、已知問題 |

若發現不一致，主動提醒用戶更新。

### 2. 操作風格更新

發現新的操作模式時，更新下方區塊。

---

## 專案操作風格

### 命名規範
- 變數/函數：camelCase (前端)、snake_case (後端)
- 元件/類別：PascalCase
- 檔案：kebab-case (前端)、snake_case (後端)

### Commit 風格
- 語言：繁體中文
- 格式：`類型: 描述`
- 範例：`功能: 新增小紅書下載支援`

### 分支策略
- 主分支：main
- 功能分支：feature/xxx

### 測試策略
- 後端：pytest (API + 單元測試)
- 前端：Jest (單元測試) + Playwright (E2E)
- 執行腳本：`./run-tests.sh`

---

## 技術偏好與決策記錄

### 為何用這個方案

| 決策 | 選擇 | 原因 |
|------|------|------|
| 前端框架 | Next.js 14 | SSR 支援、API Routes、快速開發 |
| 後端框架 | FastAPI | 與現有 Python 代碼整合、異步支援 |
| 下載工具 | yt-dlp | 支援多平台、活躍維護 |
| 瀏覽器自動化 | Selenium | 繞過反爬蟲、穩定性高 |
| 測試框架 | Playwright | 跨瀏覽器、Mobile 支援 |
| 端口配置 | 前端 3001、後端 7988 | 避免與其他專案衝突 |

### 踩過的坑

| 問題 | 症狀 | 解法 |
|------|------|------|
| Python 3.13 兼容性 | pydantic-core 編譯失敗 | 使用 >= 版本號而非固定版本 |
| yt-dlp 版本 | 版本號不存在 | 使用 >=2025.1.1 |
| 端口衝突 | 3000 被占用 | 改用 3001 |
| Playwright 瀏覽器 | 缺少瀏覽器 | npx playwright install chromium |

---

## 用戶習慣

### 工作流程偏好
- 使用 /progress 檢查進度
- 使用 /init 初始化專案
- 測試全部通過後才提交

### 溝通偏好
- 使用繁體中文
- 簡潔明確的回應
- 提供完整的執行命令

### 程式碼偏好
- TypeScript 優先
- 完整的錯誤處理
- 響應式設計（Mobile First）

---

## 更新日誌

| 日期 | 更新內容 |
|------|----------|
| 2026-01-29 | 初始建立，完成 v1.0 基礎功能 |
| 2026-01-29 | 新增自動化測試（65 tests） |
